<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>THE_HEURISTIC</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Bebas+Neue&family=Inter:wght@400;600;700&display=swap');
        :root { --neon:#00ff41; --red:#ff003c; --amber:#ffb700; --blue:#00cfff; --bg:#000; }
        *,*::before,*::after{box-sizing:border-box;}
        body,html{margin:0;padding:0;width:100%;height:100%;background:#000;color:#fff;font-family:'Bebas Neue',sans-serif;overflow:hidden;touch-action:none;}
        .page-wrapper{position:relative;width:100%;height:100%;}
        .page{position:absolute;inset:0;display:none;flex-direction:column;padding:44px 28px 118px;background:#000;z-index:5;}
        .page.active{display:flex;}
        /* CRT scanlines */
        body::before{content:'';position:fixed;inset:0;pointer-events:none;z-index:9998;opacity:0.05;background-image:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,0.4) 2px,rgba(0,0,0,0.4) 4px);animation:scanMove 6s linear infinite;}
        @keyframes scanMove{0%{background-position:0 0}100%{background-position:0 80px}}
        /* moving scan beam */
        .scanline-overlay{pointer-events:none;position:absolute;inset:0;z-index:50;overflow:hidden;}
        .scanline-overlay::after{content:'';position:absolute;left:0;width:100%;height:2px;background:linear-gradient(90deg,transparent,rgba(0,255,65,0.2),transparent);box-shadow:0 0 10px var(--neon);animation:scanBeam 3s linear infinite;}
        @keyframes scanBeam{0%{top:-2%}100%{top:102%}}
        /* header */
        #header{position:fixed;top:0;width:100%;display:flex;justify-content:space-between;align-items:center;padding:10px 20px;font-family:'Share Tech Mono',monospace;font-size:9px;color:var(--neon);z-index:1000;background:rgba(0,0,0,0.97);border-bottom:1px solid #0a0a0a;letter-spacing:3px;}
        #progress-bar{position:fixed;top:34px;left:0;height:2px;background:linear-gradient(90deg,var(--neon),var(--blue));box-shadow:0 0 12px var(--neon);z-index:1001;transition:width 0.5s cubic-bezier(0.1,0.9,0.2,1);}
        /* nav */
        #global-reminder{position:fixed;bottom:16px;left:0;width:100%;z-index:1000;pointer-events:none;text-align:center;transition:opacity 0.3s;}
        .swipe-label{font-family:'Share Tech Mono',monospace;font-size:9px;color:var(--neon);letter-spacing:8px;text-shadow:0 0 12px var(--neon);animation:pulse 1.1s infinite alternate;}
        .page-dots{display:flex;justify-content:center;gap:6px;margin-top:6px;}
        .dot{width:5px;height:5px;border-radius:50%;background:#111;border:1px solid #1a1a1a;transition:all 0.3s;}
        .dot.active{background:var(--neon);border-color:var(--neon);box-shadow:0 0 8px var(--neon);transform:scale(1.3);}
        /* type */
        .hero{font-size:13vw;line-height:0.85;text-transform:uppercase;letter-spacing:-2px;}
        .neon{color:var(--neon);text-shadow:0 0 20px var(--neon),0 0 50px var(--neon);}
        .final-line{font-size:14vw;line-height:0.88;text-transform:uppercase;animation:fadeUp 0.4s ease forwards;opacity:0;}
        /* keyframes */
        @keyframes jitter{0%{transform:translate(0,0)}25%{transform:translate(2px,-1px)}50%{transform:translate(-1px,2px)}75%{transform:translate(1px,-2px)}100%{transform:translate(-2px,1px)}}
        @keyframes jitterHard{0%{transform:translate(0,0) skewX(0)}20%{transform:translate(4px,-2px) skewX(2deg)}40%{transform:translate(-3px,3px) skewX(-1deg)}60%{transform:translate(2px,-3px) skewX(1deg)}80%{transform:translate(-2px,1px) skewX(-2deg)}100%{transform:translate(0,0)}}
        @keyframes pulse{from{opacity:0.3;transform:scale(0.97)}to{opacity:1;transform:scale(1.03)}}
        @keyframes fadeUp{from{transform:translateY(40px);opacity:0}to{transform:translateY(0);opacity:1}}
        @keyframes slideInRight{from{transform:translateX(60px);opacity:0}to{transform:translateX(0);opacity:1}}
        @keyframes scanSweep{0%{top:40px;opacity:1}100%{top:calc(100% - 110px);opacity:0.1}}
        @keyframes rageBorderPulse{from{box-shadow:inset 0 0 40px rgba(255,0,60,0.15),0 0 40px rgba(255,0,60,0.3)}to{box-shadow:inset 0 0 80px rgba(255,0,60,0.4),0 0 80px rgba(255,0,60,0.8)}}
        @keyframes blink{50%{opacity:0}}
        @keyframes glitchClip{0%,100%{clip-path:inset(0 0 100% 0)}10%{clip-path:inset(30% 0 50% 0)}20%{clip-path:inset(70% 0 10% 0)}30%{clip-path:inset(10% 0 80% 0)}40%{clip-path:inset(60% 0 25% 0)}50%{clip-path:inset(0 0 0 0)}}
        @keyframes glitchShift{0%,100%{transform:translate(0)}20%{transform:translate(-4px,2px)}40%{transform:translate(4px,-2px)}60%{transform:translate(-2px,4px)}80%{transform:translate(3px,-3px)}}
        @keyframes heartPop{0%{transform:scale(0);opacity:1}60%{transform:scale(1.5) translateY(-30px);opacity:1}100%{transform:scale(0.5) translateY(-60px);opacity:0}}
        @keyframes igSlideUp{from{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}
        @keyframes igSlideDown{from{transform:translateY(0);opacity:1}to{transform:translateY(-80px);opacity:0}}
        @keyframes heartFill{0%{transform:scale(1)}30%{transform:scale(1.7)}70%{transform:scale(0.9)}100%{transform:scale(1)}}
        @keyframes rageChipIn{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}
        @keyframes rageChipOut{from{opacity:1}to{opacity:0;transform:translateX(20px)}}
        @keyframes shrapFly{0%{opacity:1;transform:translate(0,0) scale(1)}100%{opacity:0;transform:translate(var(--dx),var(--dy)) scale(0.1) rotate(var(--rot))}}
        @keyframes shake{0%,100%{transform:translate(0)}10%{transform:translate(-8px,4px)}20%{transform:translate(8px,-4px)}30%{transform:translate(-6px,6px)}40%{transform:translate(6px,-6px)}50%{transform:translate(-4px,3px)}60%{transform:translate(4px,-3px)}70%{transform:translate(-3px,5px)}80%{transform:translate(3px,-5px)}90%{transform:translate(-2px,2px)}}
        @keyframes stampIn{0%{transform:scale(3.5) rotate(-6deg);opacity:0}50%{opacity:1}70%{transform:scale(0.94) rotate(1deg)}100%{transform:scale(1) rotate(0deg);opacity:1}}
        @keyframes unlockPop{0%{transform:translateY(24px) scale(0.88);opacity:0}70%{transform:translateY(-3px) scale(1.02);opacity:1}100%{transform:translateY(0) scale(1);opacity:1}}
        @keyframes receiptLine{from{transform:translateX(-30px);opacity:0}to{transform:translateX(0);opacity:1}}
        @keyframes flicker{0%,100%{opacity:1}48%{opacity:0.9}50%{opacity:0.6}52%{opacity:0.95}}
        @keyframes typeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
        @keyframes countUp{from{transform:scale(0.5);opacity:0}to{transform:scale(1);opacity:1}}
        .slide-in{animation:slideInRight 0.28s cubic-bezier(0.1,0.9,0.2,1) forwards;}
        /* overlays */
        #rage-flash{position:fixed;inset:0;z-index:8000;pointer-events:none;opacity:0;background:var(--red);transition:opacity 0.04s;}
        #rage-alerts{position:fixed;top:42px;right:0;z-index:9000;display:flex;flex-direction:column;align-items:flex-end;gap:3px;padding:5px;pointer-events:none;max-width:72vw;}
        .rage-chip{font-family:'Share Tech Mono',monospace;font-size:8px;letter-spacing:2px;padding:5px 10px;border-left:2px solid var(--red);background:rgba(255,0,60,0.12);color:var(--red);animation:rageChipIn 0.1s ease forwards,rageChipOut 0.25s ease 2.5s forwards;white-space:nowrap;}
        .shrapnel-bit{position:fixed;pointer-events:none;z-index:9999;animation:shrapFly 0.55s ease forwards;}
        /* p1 glitch */
        .glitch-wrap{position:relative;}
        .glitch-over{position:absolute;inset:0;color:var(--red);opacity:0;animation:glitchClip 0.15s steps(1) infinite,glitchShift 0.15s steps(1) infinite;animation-play-state:paused;}
        .glitch-wrap.firing .glitch-over{opacity:0.6;animation-play-state:running;}
        /* p2 */
        .scan-card{border-left:2px solid #111;padding:8px 0 8px 14px;opacity:0;transform:translateX(24px);transition:opacity 0.15s,transform 0.15s;}
        .scan-card.big{border-color:#fff;} .scan-card.mid{border-color:#444;} .scan-card.small{border-color:#1a1a1a;}
        .scan-card-label{font-family:'Share Tech Mono',monospace;font-size:7px;letter-spacing:3px;color:#444;margin-bottom:3px;}
        .scan-card.big .scan-card-label{color:#999;} .scan-card.mid .scan-card-label{color:#666;}
        .scan-card-shock{font-family:'Share Tech Mono',monospace;font-size:7px;color:#666;margin-top:5px;letter-spacing:1px;line-height:1.6;}
        .scan-card.big .scan-card-shock{color:#aaa;} .scan-card.mid .scan-card-shock{color:#888;}
        /* p4 */
        .headline{padding:9px 14px;margin-bottom:6px;font-family:'Bebas Neue',sans-serif;font-size:5.5vw;line-height:1.1;text-transform:uppercase;border-left:4px solid;animation:typeIn 0.2s ease both;}
        .real-news{border-color:var(--neon);color:#fff;}
        .fake-news{border-color:var(--red);color:var(--red);animation:typeIn 0.2s ease both,jitterHard 0.15s infinite;background:rgba(255,0,60,0.04);}
        #fake-counter,#real-counter{font-family:'Share Tech Mono',monospace;font-size:9px;letter-spacing:2px;padding:5px 8px;}
        #fake-counter{border:1px solid var(--red);color:var(--red);}
        #real-counter{border:1px solid var(--neon);color:var(--neon);}
        /* p5 */
        .corp-row{display:flex;align-items:center;gap:10px;padding:10px 0;border-bottom:1px solid #0d0d0d;}
        .corp-name{font-size:7vw;flex:1;}
        .corp-reach{font-family:'Share Tech Mono',monospace;font-size:8px;color:#aaa;}
        .corp-bar-wrap{width:90px;height:8px;background:#080808;border:1px solid #111;overflow:hidden;margin-top:4px;}
        .corp-bar{height:100%;width:0;transition:width 2.2s cubic-bezier(0.1,0.9,0.2,1);}
        /* p6 ig */
        #ig-wrap{position:absolute;inset:0;overflow:hidden;}
        .ig-post{position:absolute;inset:0;display:flex;flex-direction:column;background:#000;animation:igSlideUp 0.26s cubic-bezier(0.2,0.9,0.3,1) forwards;}
        .ig-post.leaving{animation:igSlideDown 0.2s ease forwards;}
        .ig-img{flex:1;position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center;}
        .ig-img-bg{position:absolute;inset:0;}
        .ig-img-emoji{font-size:22vw;position:relative;z-index:2;filter:drop-shadow(0 0 40px rgba(0,0,0,0.8));user-select:none;}
        .ig-caption-overlay{position:absolute;bottom:0;left:0;right:0;padding:40px 18px 14px;background:linear-gradient(transparent,rgba(0,0,0,0.9));z-index:3;}
        .ig-username{font-family:'Inter',sans-serif;font-weight:700;font-size:14px;color:#fff;margin-bottom:4px;}
        .ig-caption{font-family:'Inter',sans-serif;font-size:13px;color:rgba(255,255,255,0.85);line-height:1.4;}
        .ig-actions{flex-shrink:0;display:flex;align-items:stretch;background:#000;border-top:1px solid #111;height:58px;}
        .ig-action-btn{background:none;border:none;border-right:1px solid #111;cursor:pointer;padding:0 22px;display:flex;align-items:center;gap:8px;-webkit-tap-highlight-color:transparent;color:#fff;flex-shrink:0;}
        .ig-heart-icon{width:28px;height:28px;transition:transform 0.12s;}
        .ig-heart-icon.liked{animation:heartFill 0.3s ease;filter:drop-shadow(0 0 10px #ff003c);}
        .ig-like-count{font-family:'Inter',sans-serif;font-size:13px;color:#fff;font-weight:700;transition:color 0.2s;}
        .ig-like-count.liked{color:#ff3355;}
        .ig-skip-btn{background:none;border:none;color:rgba(255,255,255,0.45);font-family:'Share Tech Mono',monospace;font-size:11px;letter-spacing:3px;cursor:pointer;-webkit-tap-highlight-color:transparent;flex:1;text-align:center;transition:all 0.1s;}
        .ig-skip-btn:active{color:#fff;background:rgba(255,255,255,0.06);}
        .float-heart{position:fixed;font-size:24px;pointer-events:none;z-index:20000;animation:heartPop 0.8s ease forwards;}
        .ig-dot-row{display:flex;justify-content:center;gap:4px;padding:4px 0 2px;background:#000;flex-shrink:0;}
        .ig-dot{width:5px;height:5px;border-radius:50%;background:#1a1a1a;transition:all 0.2s;}
        .ig-dot.active{background:#fff;transform:scale(1.2);}
        /* p7 */
        .beh-stat{border:1px solid #0d0d0d;padding:12px 14px;background:#020202;opacity:0;animation:unlockPop 0.4s ease both;}
        .beh-stat-label{font-family:'Share Tech Mono',monospace;font-size:7px;letter-spacing:3px;color:#555;margin-bottom:5px;}
        .beh-stat-value{font-family:'Bebas Neue',sans-serif;font-size:8vw;line-height:0.9;}
        .beh-stat-raw{font-family:'Share Tech Mono',monospace;font-size:9px;color:#fff;margin-top:4px;}
        .beh-stat-insight{font-family:'Share Tech Mono',monospace;font-size:9px;color:#ddd;margin-top:5px;letter-spacing:1px;line-height:1.6;}
        /* p9 */
        .protocol-item{display:flex;gap:14px;align-items:flex-start;padding:14px 0;border-bottom:1px solid #0a0a0a;opacity:0;animation:unlockPop 0.4s ease both;}
        .protocol-num{font-family:'Share Tech Mono',monospace;font-size:32px;color:var(--neon);min-width:44px;line-height:1;text-shadow:0 0 15px var(--neon);}
        .protocol-text{font-family:'Share Tech Mono',monospace;font-size:10px;color:#ccc;line-height:1.8;letter-spacing:1px;}
        .protocol-text strong{color:#fff;display:block;font-family:'Bebas Neue',sans-serif;font-size:5.5vw;margin-bottom:2px;}
        /* p10 (was p11) */
        .receipt-row{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid #0d0d0d;animation:receiptLine 0.3s ease both;overflow:hidden;}
    </style>
</head>
<body>
<div id="rage-flash"></div>
<div id="rage-alerts"></div>
<div id="header">
    <span id="h-left">[ KERNEL_ACTIVE ]</span>
    <span id="h-right">PHASE_01 / 12</span>
</div>
<div id="progress-bar" style="width:8%"></div>
<div id="global-reminder">
    <div class="swipe-label">◀ SWIPE ▶</div>
    <div class="page-dots" id="dots"></div>
</div>
<div class="page-wrapper">
<!-- ══ P1 OPENING ══ -->
<div class="page active" id="p1">
    <div class="scanline-overlay"></div>
    <div style="flex:1;display:flex;flex-direction:column;justify-content:center;">
        <div id="p1-boot" style="font-family:'Share Tech Mono',monospace;font-size:9px;color:var(--red);letter-spacing:3px;margin-bottom:16px;min-height:14px;"></div>
        <div class="glitch-wrap" id="p1-glitch" style="animation:fadeUp 0.5s ease 0.3s both;opacity:0;">
            <div class="hero">IN THE<br>21ST<br>CENTURY,<br>THOSE WHO<br><span class="neon">CONTROL<br>DATA</span><br>CONTROL<br>THE FUTURE.</div>
            <div class="hero glitch-over" aria-hidden="true">IN THE<br>21ST<br>CENTURY,<br>THOSE WHO<br><span style="color:var(--red);">CONTROL<br>DATA</span><br>CONTROL<br>THE FUTURE.</div>
        </div>
    </div>
    <div style="font-family:'Share Tech Mono',monospace;font-size:9px;color:#fff;letter-spacing:3px;animation:fadeUp 0.4s ease 1.1s both;opacity:0;border-left:2px solid #222;padding-left:10px;">— HARARI, 21 LESSONS FOR THE 21ST CENTURY</div>
</div>
<!-- ══ P2 DATA BREACH ══ -->
<div class="page" id="p2" style="padding:0;overflow:hidden;">
    <div id="scan-sweep" style="position:absolute;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,#fff,transparent);box-shadow:0 0 15px #fff,0 0 30px rgba(255,255,255,0.5);z-index:15;top:40px;animation:scanSweep 1.4s linear 0.2s forwards;opacity:0;pointer-events:none;"></div>
    <div style="position:absolute;inset:0;background:radial-gradient(ellipse at 50% 0%,#040404,#000);"></div>
    <div style="position:relative;z-index:10;width:100%;height:100%;display:flex;flex-direction:column;padding:46px 24px 110px;overflow-y:auto;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;padding-bottom:8px;border-bottom:1px solid #0d0d0d;">
            <div style="font-family:'Share Tech Mono',monospace;font-size:8px;letter-spacing:4px;color:#fff;">⚡ BREACH DETECTED — EXTRACTING</div>
            <span id="scan-pct" style="font-family:'Share Tech Mono',monospace;font-size:9px;letter-spacing:3px;color:var(--red);">0%</span>
        </div>
        <div style="height:3px;background:#080808;margin-bottom:16px;border:1px solid #111;overflow:hidden;">
            <div id="scan-bar" style="height:100%;width:0%;background:linear-gradient(90deg,var(--red),var(--amber));box-shadow:0 0 14px var(--red);transition:width 0.12s linear;"></div>
        </div>
        <div style="position:relative;height:72px;background:#040404;border:1px solid #111;margin-bottom:16px;overflow:hidden;flex-shrink:0;">
            <div id="map-fail" style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-family:'Share Tech Mono',monospace;font-size:8px;color:#888;letter-spacing:4px;">◉ LOCATING...</div>
            <img id="town-img" style="width:100%;height:100%;object-fit:cover;filter:grayscale(1) brightness(0.22) contrast(3.5);position:relative;z-index:2;opacity:0;transition:opacity 2s;" src=""/>
            <div style="position:absolute;inset:0;z-index:3;pointer-events:none;display:flex;align-items:center;justify-content:center;">
                <div style="width:18px;height:18px;border:1px solid var(--red);border-radius:50%;opacity:0.9;animation:pulse 0.55s infinite alternate;box-shadow:0 0 12px var(--red);"></div>
                <div style="position:absolute;width:1px;height:100%;background:rgba(255,0,60,0.15);"></div>
                <div style="position:absolute;width:100%;height:1px;background:rgba(255,0,60,0.15);"></div>
            </div>
        </div>
        <div id="scan-rows" style="display:flex;flex-direction:column;gap:12px;"></div>
        <div id="got-sting" style="margin-top:20px;opacity:0;transition:opacity 0.6s;">
            <div style="border-top:1px solid #111;padding-top:16px;">
                <div style="font-family:'Bebas Neue',sans-serif;font-size:10vw;color:#fff;line-height:0.88;">I GOT THIS IN<br><span style="color:var(--red);text-shadow:0 0 30px var(--red),0 0 60px var(--red);">2 SECONDS.</span></div>
                <div style="font-family:'Bebas Neue',sans-serif;font-size:6.5vw;color:#fff;line-height:0.92;margin-top:10px;">IMAGINE WHAT<br><span style="color:var(--amber);text-shadow:0 0 15px var(--amber);">THEY GET.</span></div>
            </div>
        </div>
    </div>
</div>
<!-- ══ P3 TIME TRAP ══ -->
<div class="page" id="p3">
    <div style="flex:1;display:flex;flex-direction:column;justify-content:center;gap:16px;">
        <div id="p3-box" style="border:2px solid var(--red);padding:22px;background:rgba(255,0,60,0.04);text-align:center;position:relative;overflow:hidden;">
            <div style="position:absolute;inset:0;background:repeating-linear-gradient(0deg,transparent,transparent 3px,rgba(255,0,60,0.025) 3px,rgba(255,0,60,0.025) 4px);pointer-events:none;animation:scanMove 3s linear infinite;"></div>
            <div style="font-family:'Share Tech Mono',monospace;font-size:9px;color:var(--red);letter-spacing:4px;margin-bottom:10px;">⬛ TIME YOU SPENT ON LAST PAGE</div>
            <span id="time-display" style="font-size:16vw;color:var(--red);font-family:'Bebas Neue',sans-serif;display:block;line-height:1;text-shadow:0 0 35px var(--red),0 0 70px rgba(255,0,60,0.3);">—</span>
            <div id="time-compare" style="font-family:'Share Tech Mono',monospace;font-size:10px;color:#fff;margin-top:12px;letter-spacing:2px;line-height:1.8;"></div>
        </div>
        <div class="hero" style="text-align:center;font-size:10vw;line-height:0.9;">ATTENTION IS<br><span style="color:var(--red);display:inline-block;animation:jitterHard 0.08s infinite;">A WARZONE.</span></div>
        <div style="font-family:'Share Tech Mono',monospace;font-size:10px;color:#fff;letter-spacing:2px;text-align:center;line-height:2;border:1px solid #111;padding:12px;background:#020202;">
            COMPANIES PAY <span style="color:var(--amber);font-size:12px;">$4,000,000,000 / YEAR</span><br>TO STUDY HOW YOUR EYES MOVE.
        </div>
    </div>
</div>
<!-- ══ P4 HEADLINES ══ -->
<div class="page" id="p4">
    <div style="padding-top:4px;flex:1;display:flex;flex-direction:column;overflow:hidden;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:7px;flex-shrink:0;">
            <div style="font-family:'Share Tech Mono',monospace;font-size:9px;color:#fff;letter-spacing:2px;">LIVE FEED</div>
            <div style="display:flex;gap:6px;">
                <div id="real-counter">REAL: <span id="rc">0</span></div>
                <div id="fake-counter">FAKE: <span id="fc">0</span></div>
            </div>
        </div>
        <div style="font-family:'Bebas Neue',sans-serif;font-size:5.5vw;margin-bottom:5px;line-height:1.1;flex-shrink:0;">
            <span style="color:var(--neon);">█ REAL</span>&nbsp;&nbsp;<span style="color:var(--red);animation:jitter 0.1s infinite;display:inline-block;">█ DESIGNED TO HIJACK YOUR BRAIN</span>
        </div>
        <div style="font-family:'Share Tech Mono',monospace;font-size:9px;color:#fff;letter-spacing:1px;margin-bottom:8px;line-height:1.7;border-left:3px solid var(--red);padding:8px 10px;background:rgba(255,0,60,0.05);flex-shrink:0;">
            ⚡ FAKE NEWS TRAVELS <span style="color:var(--red);">6× FASTER</span> THAN TRUTH. YOUR BRAIN CANNOT TELL THE DIFFERENCE IN REAL TIME.
        </div>
        <div id="headline-assault" style="overflow-y:auto;flex:1;"></div>
    </div>
</div>
<!-- ══ P5 RAGE WALL ══ -->
<div class="page" id="p5" style="padding:0;overflow:hidden;">
    <div style="position:absolute;inset:0;background:radial-gradient(ellipse at center,#1a0000 0%,#000 65%);z-index:0;pointer-events:none;animation:flicker 1.5s infinite;"></div>
    <div id="rage-border" style="position:absolute;inset:0;border:2px solid var(--red);z-index:1;pointer-events:none;animation:rageBorderPulse 0.32s ease-in-out infinite alternate;"></div>
    <div style="position:relative;z-index:2;width:100%;height:100%;display:flex;flex-direction:column;padding:14px 18px 108px;overflow:hidden;">
        <div style="font-family:'Share Tech Mono',monospace;font-size:8px;letter-spacing:5px;color:var(--red);margin-bottom:8px;display:flex;justify-content:space-between;align-items:center;">
            <span style="animation:jitterHard 0.07s infinite;">⚠ THIS IS WHAT THEY DO TO YOU</span>
            <span style="display:flex;align-items:center;gap:5px;"><span style="width:6px;height:6px;background:var(--red);border-radius:50%;display:inline-block;animation:blink 0.4s step-end infinite;box-shadow:0 0 8px var(--red);"></span>LIVE</span>
        </div>
        <div id="rage-wall" style="flex:1;overflow:hidden;display:flex;flex-direction:column;"></div>
        <div style="margin-top:6px;border-top:1px solid #1a0000;padding-top:6px;display:flex;align-items:center;gap:8px;">
            <div style="font-family:'Share Tech Mono',monospace;font-size:7px;color:var(--red);letter-spacing:3px;flex-shrink:0;opacity:0.8;">OUTRAGE TIME:</div>
            <div id="rage-timer-val" style="font-family:'Bebas Neue',sans-serif;font-size:26px;color:var(--red);text-shadow:0 0 20px var(--red);min-width:70px;">0.0s</div>
            <div style="flex:1;height:4px;background:#0d0000;border:1px solid #1a0000;overflow:hidden;">
                <div id="rage-progress-bar" style="height:100%;background:linear-gradient(90deg,var(--red),#ff6600);width:0;transition:width 0.08s linear;box-shadow:0 0 8px var(--red);"></div>
            </div>
            <div style="font-family:'Share Tech Mono',monospace;font-size:7px;color:var(--red);letter-spacing:2px;opacity:0.7;">LOGGED</div>
        </div>
    </div>
    <div id="rage-ripple" style="position:absolute;inset:0;z-index:10;cursor:crosshair;"></div>
</div>
<!-- ══ P6 IG FEED ══ -->
<div class="page" id="p6" style="padding:0;overflow:hidden;">
    <div style="position:absolute;top:36px;left:0;right:0;z-index:20;display:flex;justify-content:space-between;align-items:center;padding:8px 18px;background:rgba(0,0,0,0.9);backdrop-filter:blur(8px);border-bottom:1px solid #0a0a0a;">
        <div style="font-family:'Inter',sans-serif;font-weight:700;font-size:16px;color:#fff;">for you</div>
        <div id="ig-session-clock" style="font-family:'Share Tech Mono',monospace;font-size:8px;color:#aaa;letter-spacing:2px;">0:00</div>
    </div>
    <div class="ig-dot-row" id="ig-dots" style="position:absolute;top:73px;left:0;right:0;z-index:20;"></div>
    <div id="ig-wrap" style="top:86px;"></div>
</div>
<!-- ══ P7 BEHAVIORAL ══ -->
<div class="page" id="p7" style="padding:0;overflow:hidden;">
    <div style="position:absolute;inset:0;background:radial-gradient(ellipse at 50% 0%,#0d0600,#000 55%);pointer-events:none;z-index:0;"></div>
    <div style="position:relative;z-index:2;width:100%;height:100%;display:flex;flex-direction:column;padding:46px 24px 108px;overflow-y:auto;">
        <div style="font-family:'Share Tech Mono',monospace;font-size:8px;letter-spacing:5px;color:var(--amber);margin-bottom:4px;animation:jitter 0.1s infinite;">⚠ BEHAVIORAL_ANALYSIS://LIVE</div>
        <div style="font-family:'Share Tech Mono',monospace;font-size:9px;color:#fff;letter-spacing:2px;margin-bottom:16px;">COMPILED FROM YOUR ACTIONS ON THIS PAGE</div>
        <div style="border-left:4px solid var(--amber);padding:14px 0 14px 18px;margin-bottom:16px;background:rgba(255,183,0,0.025);">
            <div style="font-family:'Share Tech Mono',monospace;font-size:7px;letter-spacing:4px;color:var(--amber);margin-bottom:6px;opacity:0.8;">PERSONALITY TYPE DETECTED</div>
            <div id="beh-type" style="font-family:'Bebas Neue',sans-serif;font-size:13vw;color:var(--amber);line-height:0.85;text-shadow:0 0 30px var(--amber),0 0 70px rgba(255,183,0,0.25);"></div>
            <div id="beh-type-desc" style="font-family:'Share Tech Mono',monospace;font-size:10px;color:#fff;margin-top:10px;line-height:1.8;letter-spacing:1px;"></div>
        </div>
        <div id="beh-stats" style="display:flex;flex-direction:column;gap:10px;"></div>
        <div style="margin-top:18px;border-top:1px solid #111;padding-top:16px;">
            <div style="font-family:'Bebas Neue',sans-serif;font-size:8vw;color:#fff;line-height:0.88;">CAMBRIDGE ANALYTICA<br>DID THIS WITH<br><span style="color:var(--amber);text-shadow:0 0 25px var(--amber);">87 MILLION PROFILES.</span></div>
            <div style="font-family:'Share Tech Mono',monospace;font-size:9px;color:#fff;margin-top:12px;letter-spacing:2px;line-height:2;border-left:2px solid var(--amber);padding-left:10px;">THEY ONLY NEEDED 68 FACEBOOK LIKES.<br>YOU JUST GAVE THEM MORE THAN THAT.</div>
        </div>
    </div>
</div>
<!-- ══ P8 WHO CONTROLS ══ -->
<div class="page" id="p8" style="padding-top:44px;">
    <div style="flex:1;overflow-y:auto;padding-top:8px;">
        <div style="font-family:'Bebas Neue',sans-serif;font-size:9vw;color:#fff;line-height:0.88;margin-bottom:4px;">5 CORPORATIONS.<br><span style="color:var(--red);text-shadow:0 0 20px var(--red);">4.8 BILLION</span> HUMANS.</div>
        <div style="font-family:'Share Tech Mono',monospace;font-size:9px;color:#fff;letter-spacing:3px;margin-bottom:14px;opacity:0.6;">ONE. SINGLE. AGENDA.</div>
        <div id="corp-list"></div>
        <div id="corp-total" style="display:none;font-family:'Share Tech Mono',monospace;font-size:9px;color:#fff;letter-spacing:1px;padding:12px 0;border-top:1px solid #111;line-height:2;"></div>
        <div style="margin-top:14px;">
            <div style="font-family:'Share Tech Mono',monospace;font-size:9px;color:#fff;letter-spacing:2px;line-height:2;border-left:2px solid var(--red);padding-left:10px;">IN 2016 THEY KNEW WHO WOULD VOTE.<br>BY 2028 THEY'LL KNOW WHAT YOU DREAM.</div>
            <div class="hero" style="font-size:9vw;color:var(--red);animation:jitterHard 0.1s infinite;margin-top:12px;line-height:0.88;text-shadow:0 0 20px var(--red);">THIS IS<br>NOT<br>PARANOIA.</div>
        </div>
    </div>
</div>
<!-- ══ P9 RESISTANCE ══ -->
<div class="page" id="p9" style="padding-top:44px;">
    <div style="flex:1;overflow-y:auto;padding-top:6px;">
        <div style="font-family:'Bebas Neue',sans-serif;font-size:11vw;color:var(--neon);text-shadow:0 0 25px var(--neon);line-height:0.88;margin-bottom:4px;">FIGHT<br>BACK.</div>
        <div style="font-family:'Share Tech Mono',monospace;font-size:9px;color:#fff;letter-spacing:3px;margin-bottom:14px;opacity:0.6;">RESISTANCE_PROTOCOL://</div>
        <div id="protocol-list"></div>
    </div>
</div>
<!-- ══ P10 THE CALLBACK ══ -->
<div class="page" id="p10" style="padding:0;overflow:hidden;">
    <div style="position:absolute;inset:0;background:radial-gradient(ellipse at 50% 80%,#001800,#000 55%);pointer-events:none;"></div>
    <div style="position:absolute;inset:0;background:repeating-linear-gradient(0deg,transparent,transparent 3px,rgba(0,255,65,0.012) 3px,rgba(0,255,65,0.012) 4px);pointer-events:none;animation:scanMove 4s linear infinite;"></div>
    <div style="position:relative;z-index:2;width:100%;height:100%;display:flex;flex-direction:column;padding:46px 24px 108px;overflow-y:auto;">
        <div style="font-family:'Share Tech Mono',monospace;font-size:8px;letter-spacing:5px;color:var(--neon);margin-bottom:14px;opacity:0.5;">RECEIPT_GENERATED://</div>
        <div id="p10-headline" style="font-family:'Bebas Neue',sans-serif;font-size:11vw;line-height:0.86;color:#fff;margin-bottom:18px;"></div>
        <div id="p10-receipt" style="display:flex;flex-direction:column;margin-bottom:18px;"></div>
        <div id="p10-time-block" style="border:1px solid #0a1a0a;padding:16px;background:#010901;margin-bottom:14px;"></div>
        <div id="p10-footer" style="font-family:'Share Tech Mono',monospace;font-size:10px;color:#fff;letter-spacing:1px;line-height:2;margin-top:auto;"></div>
    </div>
</div>
<!-- ══ P11 CINEMATIC: POWER & ATTENTION ══ -->
<div class="page" id="p11" style="padding:0;overflow:hidden;">
    <canvas id="p11-canvas" style="position:absolute;inset:0;z-index:0;width:100%;height:100%;"></canvas>
    <div style="position:absolute;inset:0;z-index:1;pointer-events:none;background:radial-gradient(ellipse at 50% 60%,rgba(0,10,0,0.0),rgba(0,0,0,0.85));"></div>
    <div id="p11-content" style="position:relative;z-index:2;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:50px 32px 100px;overflow:hidden;">
        <!-- Artifact display area -->
        <div id="p11-artifact" style="position:absolute;top:50%;left:50%;pointer-events:none;transform:translate(-50%,-50%);"></div>
        <!-- Text content -->
        <div id="p11-text" style="position:relative;z-index:5;width:100%;max-width:420px;"></div>
        <!-- CTA Button -->
        <button id="p11-btn" onclick="navigateToOutro()" style="display:none;position:relative;z-index:10;margin-top:auto;background:transparent;border:1px solid var(--neon);color:var(--neon);font-family:'Share Tech Mono',monospace;font-size:11px;letter-spacing:5px;padding:16px 36px;cursor:pointer;-webkit-tap-highlight-color:transparent;box-shadow:0 0 30px rgba(0,255,65,0.25),inset 0 0 20px rgba(0,255,65,0.05);animation:cineticPulse 1.2s ease-in-out infinite alternate;text-transform:uppercase;">ENTER THE VOID →</button>
    </div>
</div>
<!-- ══ P12 MOONV1LLAIN OUTRO ══ -->
<div class="page" id="p12" style="padding:0;overflow:hidden;">
    <canvas id="p12-stars" style="position:absolute;inset:0;z-index:0;"></canvas>
    <div style="position:absolute;inset:0;z-index:1;background:radial-gradient(ellipse at 50% 50%,rgba(0,20,0,0.4),rgba(0,0,0,0.95));pointer-events:none;"></div>
    <div style="position:relative;z-index:2;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 28px;text-align:center;">
        <div id="p12-prefix" style="font-family:'Share Tech Mono',monospace;font-size:9px;color:var(--neon);letter-spacing:6px;margin-bottom:24px;opacity:0;transition:opacity 1s;">TRANSMISSION COMPLETE</div>
        <div id="p12-logo" style="opacity:0;transition:opacity 1.5s;margin-bottom:16px;">
            <div style="font-family:'Bebas Neue',sans-serif;font-size:16vw;line-height:0.82;letter-spacing:-1px;background:linear-gradient(135deg,#fff 0%,var(--neon) 40%,#fff 70%,var(--neon) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;filter:drop-shadow(0 0 30px rgba(0,255,65,0.4));animation:logoShimmer 3s ease-in-out infinite;">MOON<br>V1LLAIN</div>
        </div>
        <div id="p12-thanks" style="opacity:0;transition:opacity 1s;font-family:'Share Tech Mono',monospace;font-size:11px;color:rgba(255,255,255,0.5);letter-spacing:4px;margin-bottom:32px;">MOONV1LLAIN THANKS YOU FOR PARTICIPATING</div>
        <div id="p12-line" style="width:0;height:1px;background:linear-gradient(90deg,transparent,var(--neon),transparent);transition:width 1.5s cubic-bezier(0.1,0.9,0.2,1);margin-bottom:32px;"></div>
        <div id="p12-sub" style="opacity:0;transition:opacity 1s;font-family:'Share Tech Mono',monospace;font-size:8px;color:rgba(255,255,255,0.9);letter-spacing:3px;line-height:2.2;text-align:center;">NOW YOU SEE THE ARCHITECTURE.<br>WHAT YOU DO NEXT<br>IS THE ONLY DATA POINT THAT MATTERS.</div>
    </div>
</div>
</div>
<style>
@keyframes cineticPulse{from{box-shadow:0 0 20px rgba(0,255,65,0.2),inset 0 0 10px rgba(0,255,65,0.03)}to{box-shadow:0 0 50px rgba(0,255,65,0.5),inset 0 0 30px rgba(0,255,65,0.1)}}
@keyframes artifactFloat{0%,100%{transform:translate(-50%,-50%) scale(1) rotate(0deg)}33%{transform:translate(-50%,-52%) scale(1.03) rotate(0.5deg)}66%{transform:translate(-50%,-48%) scale(0.98) rotate(-0.5deg)}}
@keyframes logoShimmer{0%,100%{filter:drop-shadow(0 0 20px rgba(0,255,65,0.3))}50%{filter:drop-shadow(0 0 60px rgba(0,255,65,0.8)) drop-shadow(0 0 120px rgba(0,255,65,0.3))}}
@keyframes starTwinkle{0%,100%{opacity:0.2}50%{opacity:1}}
@keyframes cineFadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes cineSlash{from{width:0}to{width:100%}}
.cine-line{opacity:0;animation:cineFadeIn 0.6s ease forwards;}
.cine-slash{display:block;height:1px;background:linear-gradient(90deg,var(--neon),transparent);margin:6px 0;width:0;animation:cineSlash 0.5s ease forwards;}
</style>
<script>
const TOTAL_PAGES=12;
const pages=document.querySelectorAll('.page');
let currentPage=0,touchStartX=0,touchStartY=0,page2StartTime=0;
const globalStart=performance.now();
// DOTS
const dotsContainer=document.getElementById('dots');
for(let i=0;i<TOTAL_PAGES;i++){const d=document.createElement('div');d.className='dot'+(i===0?' active':'');dotsContainer.appendChild(d);}
function updateDots(){
    document.querySelectorAll('.dot').forEach((d,i)=>d.classList.toggle('active',i===currentPage));
    document.getElementById('progress-bar').style.width=((currentPage+1)/TOTAL_PAGES*100).toFixed(0)+'%';
    document.getElementById('h-right').innerText=`PHASE_${String(currentPage+1).padStart(2,'0')} / ${TOTAL_PAGES}`;
    const rem=document.getElementById('global-reminder');
    if(rem)rem.style.opacity=currentPage===5?'0':'1';
}
// NAVIGATION
window.addEventListener('touchstart',e=>{touchStartX=e.touches[0].clientX;touchStartY=e.touches[0].clientY;},{passive:true});
window.addEventListener('touchend',e=>{
    const dx=touchStartX-e.changedTouches[0].clientX;
    const dy=touchStartY-e.changedTouches[0].clientY;
    if(Math.abs(dx)>Math.abs(dy)&&Math.abs(dx)>40)navigate(dx>0?1:-1);
},{passive:true});
window.addEventListener('keydown',e=>{
    if(e.key==='ArrowRight'||e.key==='ArrowDown')navigate(1);
    if(e.key==='ArrowLeft'||e.key==='ArrowUp')navigate(-1);
});
document.querySelector('.page-wrapper').addEventListener('click',e=>{
    if(e.target.closest('#p6'))return;
    navigate(e.clientX>window.innerWidth/2?1:-1);
});
function navigate(dir){
    let next=currentPage+dir;
    if(next<0||next>=TOTAL_PAGES)return;
    if(currentPage===5&&!igFeedDone)return;
    if(next===5&&igIndex>0&&igIndex<IG_POSTS.length)return;
    if(currentPage===1){
        const dur=(performance.now()-page2StartTime)/1000;
        const td=document.getElementById('time-display');
        td.innerText=dur.toFixed(2)+'s';
        td.style.animation='stampIn 0.35s cubic-bezier(0.1,0.9,0.2,1) forwards';
        document.getElementById('time-compare').innerHTML=dur<3?`FASTER THAN YOU BLINK.<br>YOU BARELY PROCESSED WHAT YOU SAW.`:dur<8?`AVERAGE. THE ALGO ALREADY<br>KNEW YOU'D MOVE ON.`:`SLOW. YOU ACTUALLY THOUGHT.<br><span style="color:var(--neon);">THAT'S RARE.</span>`;
        document.body.style.animation='shake 0.4s ease';
        setTimeout(()=>document.body.style.animation='',400);
    }
    // glitch flash
    const f=document.getElementById('rage-flash');f.style.background='#fff';f.style.opacity='0.05';setTimeout(()=>f.style.opacity='0',80);
    pages[currentPage].classList.remove('active','slide-in');
    currentPage=next;
    pages[currentPage].classList.add('active','slide-in');
    updateDots();
    onPageEnter(currentPage);
}
function onPageEnter(pg){
    if(pg===1){page2StartTime=performance.now();fetchPayload();}
    if(pg===3)startAssault();
    if(pg===4)initRageMachine();
    if(pg===5)initIGFeed();
    if(pg===6)buildBehavioralAnalysis();
    if(pg===7)buildCorps();
    if(pg===8)buildProtocol();
    if(pg===9)buildCallback();
    if(pg===10)buildCinematic();
    if(pg===11)buildOutro();
}
// SWIPE TRACKER
let touchVelocities=[],swipeStart=0,hesitations=0;
window.addEventListener('touchstart',()=>swipeStart=performance.now(),{passive:true});
window.addEventListener('touchend',()=>{const dt=performance.now()-swipeStart;touchVelocities.push(dt);if(dt>300)hesitations++;},{passive:true});
// ── P1 GLITCH BOOT ─────────────────────────────────────────────
(function initP1(){
    const boot=document.getElementById('p1-boot');
    const glitch=document.getElementById('p1-glitch');
    const msgs=['▌ BOOTING KERNEL...','▌ CALIBRATING SIGNAL...','▌ RUNNING AWARENESS PROTOCOL...','▌ SEQUENCE INITIATED.'];
    let mi=0; boot.innerText=msgs[0];
    const biv=setInterval(()=>{mi++;if(mi>=msgs.length){clearInterval(biv);boot.style.color='var(--neon)';return;}boot.innerText=msgs[mi];},400);
    setInterval(()=>{glitch.classList.add('firing');setTimeout(()=>glitch.classList.remove('firing'),160);},3800+Math.random()*4000);
})();
// ── P2 DATA BREACH ─────────────────────────────────────────────
async function fetchPayload(){
    const rows=document.getElementById('scan-rows');
    const bar=document.getElementById('scan-bar');
    const pct=document.getElementById('scan-pct');
    rows.innerHTML='';
    function fp(){try{const c=document.createElement('canvas'),cx=c.getContext('2d');cx.font='14px Arial';cx.fillStyle='#f60';cx.fillRect(125,1,62,20);cx.fillStyle='#069';cx.fillText('fp',2,15);const d=c.toDataURL();let h=0;for(let i=0;i<d.length;i++)h=((h<<5)-h)+d.charCodeAt(i);return(h>>>0).toString(16).toUpperCase().slice(0,10);}catch(e){return'BLOCKED';}}
    function gpu(){try{const gl=document.createElement('canvas').getContext('webgl');const ext=gl.getExtension('WEBGL_debug_renderer_info');return ext?gl.getParameter(ext.UNMASKED_RENDERER_WEBGL).split('/')[0].trim().slice(0,26):'MASKED';}catch(e){return'UNAVAILABLE';}}
    function fonts(){const list=['Arial','Helvetica','Times New Roman','Courier New','Georgia','Verdana','Comic Sans MS','Impact'];const c=document.createElement('canvas').getContext('2d');c.font='72px monospace';const base=c.measureText('mmmmmmm').width;return list.filter(f=>{c.font=`72px '${f}',monospace`;return c.measureText('mmmmmmm').width!==base;}).length;}
    function sched(){const h=new Date().getHours();return h<5?'NIGHT OWL':h<8?'EARLY RISER':h<12?'MORNING USER':h<17?'AFTERNOON SCROLLER':h<21?'EVENING SCROLL':'LATE NIGHT DOOMSCROLL';}
    const cores=navigator.hardwareConcurrency||'?';
    const ram=navigator.deviceMemory?navigator.deviceMemory+'GB':'?';
    const dnt=navigator.doNotTrack==='1'?'ON — IGNORED':'OFF';
    const webrtc=typeof RTCPeerConnection!=='undefined'?'LEAKING':'BLOCKED';
    let heap='?';if(performance.memory)heap=Math.round(performance.memory.usedJSHeapSize/1048576)+'MB';
    let batt='?',chg='?';try{if(navigator.getBattery){const b=await navigator.getBattery();batt=Math.round(b.level*100)+'%';chg=b.charging?'YES ⚡':'NO';}}catch(e){}
    const CARDS=[
        {label:'DEVICE FINGERPRINT',value:fp(),shock:'SAME ID. EVERY TIME. ACROSS BROWSERS. ACROSS INCOGNITO.',size:'big'},
        {label:'YOUR LOCATION',value:'LOCATING...',shock:"300+ DATA BROKERS RECEIVE THIS EVERY HOUR YOU'RE ONLINE.",size:'big',id:'r-city'},
        {label:'YOUR IP ADDRESS',value:'...',shock:'YOUR FRONT DOOR ON THE INTERNET. SOLD EVERY HOUR.',size:'big',id:'r-ip'},
        {label:'INTERNET PROVIDER',value:'...',shock:'THEY SELL YOUR FULL BROWSING HISTORY. COMPLETELY LEGAL.',size:'mid',id:'r-isp'},
        {label:'TIME PROFILE',value:new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})+' · '+sched(),shock:"THEY KNOW WHEN YOU SLEEP. WHEN YOU CAN'T SLEEP.",size:'mid'},
        {label:'HARDWARE',value:cores+' CORES · '+ram+' RAM',shock:'IDENTIFIES YOU AMONG BILLIONS OF DEVICES.',size:'mid'},
        {label:'GPU',value:gpu(),shock:'EXTRACTED VIA WEBGL. ZERO PERMISSION ASKED.',size:'mid'},
        {label:'BATTERY',value:batt+' · CHARGING: '+chg,shock:'USED TO TRACK YOU ACROSS TABS AND SESSIONS.',size:'small'},
        {label:'DO NOT TRACK',value:dnt,shock:'EVERY MAJOR PLATFORM IGNORES THIS SETTING.',size:'small'},
        {label:'FONTS INSTALLED',value:fonts()+' DETECTED',shock:'FINGERPRINTS YOUR EXACT SOFTWARE ENVIRONMENT.',size:'small'},
        {label:'WEBRTC',value:webrtc,shock:webrtc==='LEAKING'?'YOUR REAL IP LEAKS THROUGH YOUR VPN RIGHT NOW.':'BLOCKED. THIS IS EXTREMELY RARE.',size:'small'},
        {label:'MEMORY IN USE',value:heap,shock:'YOUR REAL-TIME HEAP. READ WITHOUT ASKING.',size:'small'},
    ];
    let done=0;
    function drip(){
        if(done>=CARDS.length){pct.innerHTML='<span style="color:var(--neon);">DONE</span>';const s=document.getElementById('got-sting');if(s)s.style.opacity='1';return;}
        const card=CARDS[done++];
        const BAD=['...','?','UNAVAILABLE','MASKED','BLOCKED','LOCATING...'];
        if(BAD.includes(card.value)&&!card.id){drip();return;}
        const isB=card.size==='big',isM=card.size==='mid';
        const div=document.createElement('div');div.className=`scan-card ${isB?'big':isM?'mid':'small'}`;
        div.innerHTML=`<div class="scan-card-label">${card.label}</div><div style="font-family:'Bebas Neue',sans-serif;font-size:${isB?'9vw':isM?'6.5vw':'5vw'};color:${isB?'#fff':isM?'#ccc':'#aaa'};line-height:0.92;"${card.id?` id="${card.id}"`:''}>${card.value}</div><div class="scan-card-shock">${card.shock}</div>`;
        rows.appendChild(div);
        requestAnimationFrame(()=>{div.style.opacity='1';div.style.transform='translateX(0)';});
        if(isB){const f=document.getElementById('rage-flash');f.style.background='#ff003c';f.style.opacity='0.07';setTimeout(()=>f.style.opacity='0',80);fireAlert();}
        bar.style.width=Math.round(done/CARDS.length*100)+'%';
        pct.innerHTML=`<span style="color:${done===CARDS.length?'var(--neon)':'var(--red)'};">${Math.round(done/CARDS.length*100)}%</span>`;
        setTimeout(drip,isB?560:isM?290:160);
    }
    setTimeout(drip,300);
    fetch('https://ip-api.com/json/').then(r=>r.json()).then(d=>{
        const city=((d.city||'?')+', '+(d.countryCode||'')).toUpperCase();
        const ce=document.getElementById('r-city'),ie=document.getElementById('r-ip'),se=document.getElementById('r-isp');
        if(ce&&city!=='?, '){ce.innerText=city;ce.style.color='var(--red)';ce.style.textShadow='0 0 15px var(--red)';}
        if(ie&&d.query){ie.innerText=d.query;ie.style.color='var(--red)';}
        if(se&&(d.isp||d.org))se.innerText=(d.isp||d.org).slice(0,24).toUpperCase();
        if(d.lat&&d.lon){const img=document.getElementById('town-img');img.src=`https://static-maps.yandex.ru/1.x/?ll=${d.lon},${d.lat}&z=13&l=map&size=450,100`;img.onload=()=>{img.style.opacity='1';const mf=document.getElementById('map-fail');if(mf)mf.style.opacity='0';};}
    }).catch(()=>{});
}
// ── P4 HEADLINES ───────────────────────────────────────────────
let rcCount=0,fcCount=0;
function startAssault(){
    const c=document.getElementById('headline-assault');
    if(c.children.length>0)return;
    const news=[
        {t:"NASA: Microplastics Found in Human Blood",f:false},
        {t:"BILL GATES MICROCHIPPING THE WATER SUPPLY",f:true},
        {t:"UN: 1 Million Species At Extinction Risk",f:false},
        {t:"5G TOWERS CAUSING MASS BIRD DEATH",f:true},
        {t:"Iceland Achieves 100% Renewable Energy",f:false},
        {t:"VACCINES CONTAIN FETAL TISSUE — LEAKED DOC",f:true},
        {t:"WHO: Antibiotic Resistance Is Growing Crisis",f:false},
        {t:"Scientists Successfully Sequence Full Human Genome",f:false},
        {t:"AI ALREADY CONTROLS THE STOCK MARKET",f:true},
        {t:"Ocean Temperatures Hit Record High 12th Month",f:false},
        {t:"GEORGE SOROS FUNDS WEATHER MANIPULATION",f:true},
        {t:"Study: Ultra-Processed Food Linked To Early Death",f:false},
        {t:"CHEMTRAILS PROVEN TO CONTROL POPULATION",f:true},
        {t:"Global Child Poverty Falls To Record Low",f:false},
    ];
    news.forEach((n,i)=>setTimeout(()=>{
        const d=document.createElement('div');d.className=`headline ${n.f?'fake-news':'real-news'}`;d.innerText=n.t;c.appendChild(d);c.scrollTop=c.scrollHeight;
        if(n.f){fcCount++;document.getElementById('fc').innerText=fcCount;const f=document.getElementById('rage-flash');f.style.background='#ff003c';f.style.opacity='0.04';setTimeout(()=>f.style.opacity='0',60);}
        else{rcCount++;document.getElementById('rc').innerText=rcCount;}
    },i*360));
}
// ── P5 RAGE WALL ───────────────────────────────────────────────
const RAGE_LINES=[
    {size:'xl',text:"YOUR ANGER WAS ENGINEERED.",color:'#ff003c'},
    {size:'sm',text:"every click. profit for someone else.",color:'#ff2244'},
    {size:'lg',text:"YOU DIDN'T CHOOSE TO FEEL THIS.",color:'#cc0022'},
    {size:'sm',text:"your data: sold. right now. again.",color:'#ff3355'},
    {size:'xl',text:"THEY PROFIT FROM YOUR OUTRAGE.",color:'#ff003c'},
    {size:'sm',text:"algorithm chose this for you.",color:'#ff2244'},
    {size:'lg',text:"YOUR FACE WAS TRACKED TODAY.",color:'#cc0022'},
    {size:'sm',text:"you worked for free. you always do.",color:'#ff3355'},
    {size:'xl',text:"THIS IS WORKING AS INTENDED.",color:'#ff003c'},
    {size:'sm',text:"your dopamine is rented.",color:'#ff2244'},
    {size:'lg',text:"YOU ARE THE PRODUCT.",color:'#cc0022'},
    {size:'sm',text:"you thanked them for it.",color:'#ff3355'},
    {size:'xl',text:"NOW YOU KNOW.",color:'#ff003c'},
];
const RAGE_ALERTS=["⚠ DATA LEAK DETECTED","⚠ YOUR ANGER WAS LOGGED","⚠ ALGORITHMS KNEW YOU'D REACT","⚠ ENGAGEMENT TARGET: MET","⚠ PROFILE UPDATED","⚠ AD AUCTION WON: $0.002","⚠ OUTRAGE_SPIKE CONFIRMED","⚠ BEHAVIORAL_DATA: SOLD","⚠ REACTION TIME: RECORDED","⚠ DOPAMINE_CYCLE: ACTIVE","⚠ YOU ARE PERFORMING CORRECTLY","⚠ SENTIMENT: NEGATIVE — IDEAL"];
const SHRAP=["█","▓","▒","×","◆","▲","//","01",">>","<<","##","!!"];
let rageInited=false,rageTimer=null,rageStart=0;
function initRageMachine(){
    rageStart=performance.now();startRageTimer();
    if(rageInited)return;rageInited=true;
    const wall=document.getElementById('rage-wall');wall.innerHTML='';
    RAGE_LINES.forEach((line,i)=>{
        const el=document.createElement('div');
        const isXL=line.size==='xl',isLG=line.size==='lg';
        el.style.cssText=`font-family:'Bebas Neue',sans-serif;font-size:${isXL?'13vw':isLG?'9.5vw':'4.5vw'};line-height:${isXL?'0.80':isLG?'0.86':'1.1'};color:${line.color};text-transform:uppercase;letter-spacing:${isXL?'-1px':'0'};opacity:0;transform:translateX(${Math.random()>0.5?'':'-'}${30+Math.random()*80}px);transition:opacity 0.1s,transform 0.12s;cursor:crosshair;padding:${isXL?'2px':'1px'} 0;text-shadow:${isXL?`0 0 30px ${line.color},0 0 60px ${line.color}`:`0 0 10px ${line.color}`};flex-shrink:0;`;
        if(isXL)el.style.animation=`jitterHard ${0.055+Math.random()*0.055}s infinite`;
        el.innerText=line.text;wall.appendChild(el);
        setTimeout(()=>{
            el.style.opacity='1';el.style.transform='translateX(0)';
            if(isXL){fireAlert();const f=document.getElementById('rage-flash');f.style.background='#ff003c';f.style.opacity='0.09';setTimeout(()=>f.style.opacity='0',60);}
        },50+i*80);
        el.addEventListener('click',e=>rageClick(e.clientX,e.clientY));
        if(isXL||isLG){
            el.addEventListener('mouseenter',()=>{el.style.textShadow=`0 0 40px #ff003c,0 0 80px #ff003c,0 0 120px #ff003c`;if(Math.random()<0.8)fireAlert();});
            el.addEventListener('mouseleave',()=>{el.style.textShadow=isXL?`0 0 30px ${line.color},0 0 60px ${line.color}`:`0 0 10px ${line.color}`;});
        }
    });
    document.getElementById('rage-ripple').addEventListener('click',e=>rageClick(e.clientX,e.clientY));
    setInterval(()=>{if(currentPage!==4)return;const els=wall.querySelectorAll('div');const el=els[Math.floor(Math.random()*els.length)];if(!el)return;const o=el.style.opacity;el.style.opacity='0.05';setTimeout(()=>el.style.opacity=o,28);},380);
    setInterval(()=>{if(currentPage!==4)return;if(Math.random()<0.6)fireAlert();},1350);
    setInterval(()=>{if(currentPage!==4)return;const b=document.getElementById('rage-border');if(b)b.style.borderColor=Math.random()>0.15?'var(--red)':'#ff6600';},240);
}
function startRageTimer(){
    if(rageTimer)clearInterval(rageTimer);
    rageTimer=setInterval(()=>{
        if(currentPage!==4){clearInterval(rageTimer);return;}
        const e=(performance.now()-rageStart)/1000;
        const tv=document.getElementById('rage-timer-val'),pb=document.getElementById('rage-progress-bar');
        if(tv)tv.innerText=e.toFixed(1)+'s';
        if(pb)pb.style.width=Math.min(e/20*100,100)+'%';
    },80);
}
function rageClick(cx,cy){
    for(let i=0;i<22;i++){
        const el=document.createElement('div');el.className='shrapnel-bit';
        el.innerText=SHRAP[Math.floor(Math.random()*SHRAP.length)];
        const angle=(i/22)*Math.PI*2,dist=70+Math.random()*150;
        el.style.cssText=`left:${cx}px;top:${cy}px;font-family:'Share Tech Mono',monospace;font-size:${9+Math.random()*14}px;color:${Math.random()>0.3?'#ff003c':'#ff6600'};position:fixed;`;
        el.style.setProperty('--dx',(Math.cos(angle)*dist)+'px');
        el.style.setProperty('--dy',(Math.sin(angle)*dist)+'px');
        el.style.setProperty('--rot',(Math.random()*900)+'deg');
        document.body.appendChild(el);setTimeout(()=>el.remove(),630);
    }
    const f=document.getElementById('rage-flash');f.style.background='#ff003c';f.style.opacity='0.28';setTimeout(()=>f.style.opacity='0',55);
    fireAlert();
}
function fireAlert(){
    const chip=document.createElement('div');chip.className='rage-chip';
    chip.innerText=RAGE_ALERTS[Math.floor(Math.random()*RAGE_ALERTS.length)];
    document.getElementById('rage-alerts').appendChild(chip);
    setTimeout(()=>chip.remove(),2900);
}
// ── P6 IG FEED ─────────────────────────────────────────────────
const IG_POSTS=[
    {user:'dailyvibes__',bg:'linear-gradient(135deg,#1a0a00,#3d1a00)',emoji:'🍕',caption:'pizza > everything else ngl',prompt:'do you like pizza?',tag:'pizza'},
    {user:'morningmood',bg:'linear-gradient(135deg,#00101a,#001f3d)',emoji:'☕',caption:'cannot function before coffee. not even a little.',prompt:'coffee person?',tag:'coffee'},
    {user:'catsofig',bg:'linear-gradient(135deg,#0d0d0d,#1a1a2e)',emoji:'🐱',caption:'they do nothing all day and still look exhausted',prompt:'do you like cats?',tag:'cats'},
    {user:'sunsetpics',bg:'linear-gradient(135deg,#1a0a00,#2d0030)',emoji:'🌅',caption:'chasing this light every single evening',prompt:'into sunsets?',tag:'sunsets'},
    {user:'foodiesonly',bg:'linear-gradient(135deg,#0a1a00,#1a3300)',emoji:'🍜',caption:'late night ramen hits different',prompt:'do you like food content?',tag:'food'},
    {user:'gymrat.life',bg:'linear-gradient(135deg,#000a1a,#001a2d)',emoji:'💪',caption:'rest day but still thinking about the gym',prompt:'into fitness?',tag:'fitness'},
    {user:'musicheads',bg:'linear-gradient(135deg,#1a001a,#2d002d)',emoji:'🎧',caption:'found a song that lives rent-free in my head',prompt:'music person?',tag:'music'},
    {user:'travelbug.co',bg:'linear-gradient(135deg,#001a1a,#002d2d)',emoji:'✈️',caption:'anywhere but here sounds good rn',prompt:'do you like travel content?',tag:'travel'},
];
let igIndex=0,igLikes=[],igSkips=[],igLikeTimes=[],igSessionStart=0,igPostStart=0,igInited=false,igFeedDone=false,igClockInterval=null;
function igDone(){navigate(1);}
function initIGFeed(){
    if(igInited)return;igInited=true;
    igSessionStart=performance.now();igPostStart=igSessionStart;
    const dotRow=document.getElementById('ig-dots');
    IG_POSTS.forEach((_,i)=>{const d=document.createElement('div');d.className='ig-dot'+(i===0?' active':'');d.id='igdot-'+i;dotRow.appendChild(d);});
    igClockInterval=setInterval(()=>{if(currentPage!==5)return;const s=Math.floor((performance.now()-igSessionStart)/1000);document.getElementById('ig-session-clock').innerText=Math.floor(s/60)+':'+(s%60<10?'0':'')+s%60;},1000);
    renderIGPost(0);
}
function renderIGPost(idx){
    if(idx>=IG_POSTS.length)return;
    const post=IG_POSTS[idx];
    const wrap=document.getElementById('ig-wrap');
    const old=wrap.querySelector('.ig-post');
    if(old){old.classList.add('leaving');setTimeout(()=>old.remove(),200);}
    document.querySelectorAll('.ig-dot').forEach((d,i)=>d.classList.toggle('active',i===idx));
    igPostStart=performance.now();
    setTimeout(()=>{
        const el=document.createElement('div');el.className='ig-post';el.dataset.idx=idx;
        el.innerHTML=`<div class="ig-img"><div class="ig-img-bg" style="background:${post.bg};"></div><div class="ig-img-emoji">${post.emoji}</div><div class="ig-caption-overlay"><div class="ig-username">@${post.user}</div><div class="ig-caption">${post.caption}</div></div></div><div style="padding:10px 18px 4px;background:#000;border-top:1px solid #0d0d0d;display:flex;align-items:center;justify-content:center;"><div style="font-family:'Inter',sans-serif;font-size:14px;color:#fff;text-align:center;font-weight:600;">${post.prompt} <span style="color:rgba(255,255,255,0.35);font-weight:400;font-size:11px;">tap ♥ or skip</span></div></div><div class="ig-actions"><button class="ig-action-btn" id="heart-btn-${idx}" onclick="igHeart(${idx},this)"><svg class="ig-heart-icon" id="heart-svg-${idx}" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg><span class="ig-like-count" id="like-count-${idx}">YES</span></button><button class="ig-skip-btn" onclick="igSkip(${idx})">NOT REALLY — SKIP</button></div>`;
        wrap.appendChild(el);
    },old?220:0);
}
function igHeart(idx,btnEl){
    const post=IG_POSTS[idx];if(igLikes.includes(post.tag))return;
    const svg=document.getElementById('heart-svg-'+idx);const countEl=document.getElementById('like-count-'+idx);
    const timeOnPost=performance.now()-igPostStart;igLikes.push(post.tag);igLikeTimes.push(Math.round(timeOnPost));
    svg.setAttribute('fill','#ff003c');svg.setAttribute('stroke','#ff003c');svg.classList.add('liked');
    countEl.innerText='♥';countEl.classList.add('liked');
    const rect=btnEl.getBoundingClientRect();
    for(let i=0;i<8;i++){const h=document.createElement('div');h.className='float-heart';h.innerText='❤';h.style.left=(rect.left+14+Math.random()*30-15)+'px';h.style.top=(rect.top+Math.random()*10-5)+'px';h.style.animationDelay=(i*65)+'ms';document.body.appendChild(h);setTimeout(()=>h.remove(),900);}
    const f=document.getElementById('rage-flash');f.style.background='#ff003c';f.style.opacity='0.06';setTimeout(()=>f.style.opacity='0',80);
    setTimeout(()=>igAdvance(idx),780);
}
function igSkip(idx){igSkips.push(IG_POSTS[idx].tag);igAdvance(idx);}
function igAdvance(idx){
    igIndex=idx+1;
    if(igIndex>=IG_POSTS.length){
        const wrap=document.getElementById('ig-wrap');
        const old=wrap.querySelector('.ig-post');if(old){old.classList.add('leaving');setTimeout(()=>old.remove(),200);}
        setTimeout(()=>{
            const done=document.createElement('div');
            done.style.cssText='display:flex;align-items:center;justify-content:center;height:100%;flex-direction:column;gap:20px;padding:40px;';
            done.innerHTML=`<div style="font-family:'Bebas Neue',sans-serif;font-size:11vw;color:#fff;letter-spacing:1px;text-align:center;line-height:0.88;">YOU'RE ALL<br>CAUGHT UP</div><div style="font-family:'Share Tech Mono',monospace;font-size:9px;color:#444;letter-spacing:3px;text-align:center;">session logged</div><button onclick="igDone()" style="margin-top:4px;background:transparent;border:1px solid var(--neon);color:var(--neon);font-family:'Share Tech Mono',monospace;font-size:11px;letter-spacing:4px;padding:14px 32px;cursor:pointer;-webkit-tap-highlight-color:transparent;box-shadow:0 0 20px rgba(0,255,65,0.2);animation:pulse 1s infinite alternate;">CONTINUE →</button>`;
            wrap.appendChild(done);igFeedDone=true;
        },260);return;
    }
    renderIGPost(igIndex);
}
// ── P7 BEHAVIORAL ──────────────────────────────────────────────
let behInited=false;
function buildBehavioralAnalysis(){
    if(behInited)return;behInited=true;
    const isMobile=/Mobile|Android|iPhone|iPad/.test(navigator.userAgent);
    const avgSwipe=touchVelocities.length?touchVelocities.reduce((a,b)=>a+b,0)/touchVelocities.length:500;
    const likeRate=igLikes.length/IG_POSTS.length;
    let type,typeDesc;
    if(igLikes.length===0){type='COLD SIGNAL';typeDesc="Zero engagement. You scrolled past everything. Either you don't respond on instinct — or you already sensed the game was rigged. Either way: they noted it.";}
    else if(likeRate>=0.75){type='HIGH YIELD';typeDesc=`${igLikes.length} of ${IG_POSTS.length} posts liked. ${Math.round(likeRate*100)}% engagement rate. Top tier. Ad platforms pay a premium for profiles like yours. You are extraordinarily profitable.`;}
    else if(igLikes.length>=1&&igLikeTimes.length&&Math.min(...igLikeTimes)<800){type='IMPULSE LIKER';typeDesc=`Your fastest like took ${Math.min(...igLikeTimes)}ms. Sub-second. You didn't decide — you reacted. That reflex is exactly what the algorithm trains for. It's working.`;}
    else{type='SELECTIVE';typeDesc=`${igLikes.length} likes. Moderate. You showed taste. But taste is still data. They now know what resonates with you. That's worth more than you think.`;}
    const typeEl=document.getElementById('beh-type');
    let ti=0;const iv=setInterval(()=>{typeEl.innerText=type.substring(0,++ti);if(ti>=type.length)clearInterval(iv);},55);
    setTimeout(()=>{document.getElementById('beh-type-desc').innerText=typeDesc;},type.length*55+300);
    const stats=[
        {label:'POSTS ENGAGED',value:`${igLikes.length} / ${IG_POSTS.length}`,color:'var(--amber)',raw:`${Math.round(likeRate*100)}% engagement rate`,insight:'Industry average is 3%. You were significantly above baseline.'},
        {label:'FASTEST REACTION',value:igLikeTimes.length?Math.min(...igLikeTimes)+'ms':'—',color:igLikeTimes.length&&Math.min(...igLikeTimes)<800?'var(--red)':'var(--neon)',raw:igLikeTimes.length&&Math.min(...igLikeTimes)<800?'IMPULSE — PRE-CONSCIOUS':'DELIBERATE',insight:'Decisions under 800ms bypass the prefrontal cortex. Pure conditioned reflex.'},
        {label:'SWIPE VELOCITY',value:avgSwipe<250?'RAPID':avgSwipe<500?'AVERAGE':'DELIBERATE',color:'var(--blue)',raw:Math.round(avgSwipe)+'ms avg per swipe',insight:hesitations>3?'Multiple hesitations detected. You were actually thinking.':'Low hesitation. High susceptibility to continuous scroll loops.'},
        {label:'DEVICE CONTEXT',value:isMobile?'MOBILE':'DESKTOP',color:'#fff',raw:isMobile?'HIGHEST VULNERABILITY':'REDUCED VULNERABILITY',insight:isMobile?'Mobile users are 40% more likely to make impulse decisions.':'Even on desktop your behavioral patterns were fully captured.'},
    ];
    const container=document.getElementById('beh-stats');
    stats.forEach((s,i)=>{const div=document.createElement('div');div.className='beh-stat';div.style.animationDelay=(type.length*55+400+i*160)+'ms';div.innerHTML=`<div class="beh-stat-label">${s.label}</div><div class="beh-stat-value" style="color:${s.color};">${s.value}</div><div class="beh-stat-raw">${s.raw}</div><div class="beh-stat-insight">${s.insight}</div>`;container.appendChild(div);});
}
// ── P8 CORPS ───────────────────────────────────────────────────
let corpsInited=false;
function buildCorps(){
    if(corpsInited)return;corpsInited=true;
    const container=document.getElementById('corp-list');
    const corps=[
        {name:'META',reach:'3.2B USERS · 98% PROFILED',pct:98,color:'var(--blue)',rev:'$135B/YR'},
        {name:'GOOGLE',reach:'4.3B SEARCHES/DAY',pct:92,color:'var(--neon)',rev:'$280B/YR'},
        {name:'TIKTOK',reach:'1.7B USERS · 95MIN/DAY',pct:88,color:'var(--red)',rev:'$80B/YR'},
        {name:'AMAZON',reach:'310M SHOPPERS',pct:74,color:'var(--amber)',rev:'$525B/YR'},
        {name:'APPLE',reach:'2B ACTIVE DEVICES',pct:68,color:'#fff',rev:'$400B/YR'},
    ];
    corps.forEach((c,i)=>{
        const row=document.createElement('div');row.className='corp-row';
        row.innerHTML=`<div class="corp-name" style="color:${c.color};text-shadow:0 0 12px ${c.color};">${c.name}</div><div style="flex-shrink:0;text-align:right;"><div class="corp-reach">${c.reach}</div><div style="font-family:'Share Tech Mono',monospace;font-size:9px;color:${c.color};margin-top:2px;">${c.rev}</div><div class="corp-bar-wrap"><div class="corp-bar" id="cb-${i}" style="background:${c.color};box-shadow:0 0 8px ${c.color};"></div></div></div>`;
        container.appendChild(row);
        setTimeout(()=>document.getElementById('cb-'+i).style.width=c.pct+'%',300+i*200);
    });
    setTimeout(()=>{const tot=document.getElementById('corp-total');tot.style.display='block';tot.innerHTML=`COMBINED ANNUAL REVENUE: <span style="color:var(--red);font-size:12px;">$1,420,000,000,000</span><br>YOUR SHARE OF THAT REVENUE: <span style="color:var(--red);">$0.00</span>`;},300+corps.length*200+600);
}
// ── P9 PROTOCOL ────────────────────────────────────────────────
let protInited=false;
function buildProtocol(){
    if(protInited)return;protInited=true;
    const PROTOCOLS=[
        {n:'01',title:'KNOW THE DESIGN',body:'Every feature is engineered to addict. Variable reward. Infinite scroll. Notifications timed to withdrawal. Knowing this breaks the spell.'},
        {n:'02',title:'AUDIT YOUR FEEDS',body:"You didn't choose what you see. An algorithm chose it to maximise your time on platform. Curate ruthlessly. Unfollow anything that makes you feel worse."},
        {n:'03',title:'SLOW DOWN',body:'Speed is their weapon. Deliberate thought is yours. The 6-second pause before sharing can stop misinformation dead.'},
        {n:'04',title:'OWN YOUR ATTENTION',body:"What you pay attention to shapes who you become. Your focus is finite and irreplaceable. Guard it like money — because it IS money. Theirs."},
        {n:'05',title:'READ LONGER THINGS',body:"Books. Long essays. Anything that can't be swiped past. Train your mind to resist compression. Depth is resistance."},
    ];
    const list=document.getElementById('protocol-list');
    PROTOCOLS.forEach((p,i)=>{const div=document.createElement('div');div.className='protocol-item';div.style.animationDelay=(i*180)+'ms';div.innerHTML=`<div class="protocol-num">${p.n}</div><div class="protocol-text"><strong>${p.title}</strong>${p.body}</div>`;list.appendChild(div);});
}
function navigateToOutro(){navigate(1);}
// ── P11 CINEMATIC ──────────────────────────────────────────────
let cineInited=false;
function buildCinematic(){
    if(cineInited)return;cineInited=true;
    const canvas=document.getElementById('p11-canvas');
    canvas.width=window.innerWidth;canvas.height=window.innerHeight;
    const ctx=canvas.getContext('2d');
    const particles=[];
    for(let i=0;i<80;i++)particles.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*1.2+0.2,vx:(Math.random()-0.5)*0.3,vy:(Math.random()-0.5)*0.3,o:Math.random()});
    function drawParticles(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        particles.forEach(p=>{
            p.x+=p.vx;p.y+=p.vy;
            if(p.x<0)p.x=canvas.width;if(p.x>canvas.width)p.x=0;
            if(p.y<0)p.y=canvas.height;if(p.y>canvas.height)p.y=0;
            ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
            ctx.fillStyle=`rgba(0,255,65,${p.o*0.4})`;ctx.fill();
        });
        if(currentPage===10)requestAnimationFrame(drawParticles);
    }
    drawParticles();
    const SEQUENCES=[
        {era:'LAND',years:'~10,000 BC',artifact:'🌍',artifactOld:'⚔️',lines:['For thousands of years,','power meant controlling','LAND.'],sub:'Empires rose and fell over territory.\nAgriculture. Borders. Conquest.',pause:true},
        {era:'MACHINES',years:'1760 — 1900s',artifact:'⚙️',artifactOld:'🏭',lines:['Then power meant','controlling','MACHINES.'],sub:'The Industrial Revolution.\nFactory owners owned the future.',pause:false},
        {era:'OIL',years:'1900 — 1990s',artifact:'🛢️',artifactOld:'💰',lines:['Then','OIL.'],sub:'Nations went to war over crude.\nWhoever controlled energy, controlled economies.',pause:false},
        {era:'DATA',years:'1990 — 2020s',artifact:'📡',artifactOld:'💾',lines:['Then','DATA.'],sub:'Your clicks. Your searches. Your fears.\nSold before you finished the sentence.',pause:false},
        {era:'PAUSE',years:'',artifact:'',artifactOld:'',lines:['...'],sub:'',pause:true,isPause:true},
        {era:'ATTENTION',years:'NOW',artifact:'👁️',artifactOld:'🧠',lines:['Now?','Power means controlling','ATTENTION.'],sub:'Not what you think.\nWhat you are ABLE to think.',pause:true},
        {era:'HOMO DEUS',years:'HARARI',artifact:'🧬',artifactOld:'📜',lines:['Humans are the only species','that can believe in things','that don\'t physically exist.'],sub:'Nations. Money. Gods. Corporations.\nWe built civilizations on shared imagination.',pause:false},
        {era:'TODAY',years:'2024',artifact:'🤖',artifactOld:'💭',lines:['And today…','Algorithms shape','what billions imagine.'],sub:'',pause:false,isFinal:true},
    ];
    const textEl=document.getElementById('p11-text');
    const artifactEl=document.getElementById('p11-artifact');
    const btn=document.getElementById('p11-btn');
    btn.style.opacity='0';btn.style.transition='opacity 0.6s';
    let si=0;
    function showSequence(idx){
        if(idx>=SEQUENCES.length){btn.style.display='block';setTimeout(()=>btn.style.opacity='1',50);return;}
        const seq=SEQUENCES[idx];
        textEl.innerHTML='';artifactEl.innerHTML='';artifactEl.style.opacity='0';artifactEl.style.transition='opacity 0.8s';
        if(seq.artifact&&!seq.isPause){
            artifactEl.innerHTML=`<div style="position:relative;text-align:center;"><div style="font-size:26vw;opacity:0.035;filter:blur(3px);line-height:1;user-select:none;">${seq.artifactOld}</div><div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:14vw;filter:drop-shadow(0 0 40px rgba(0,255,65,0.3));line-height:1;user-select:none;animation:artifactFloat 5s ease-in-out infinite;">${seq.artifact}</div>${seq.years?`<div style="font-family:'Share Tech Mono',monospace;font-size:7px;color:rgba(0,255,65,0.35);letter-spacing:5px;margin-top:8px;">${seq.years}</div>`:''}</div>`;
            setTimeout(()=>{artifactEl.style.opacity='1';},80);
        }
        if(seq.era&&!seq.isPause){
            const eraEl=document.createElement('div');
            eraEl.style.cssText="font-family:'Share Tech Mono',monospace;font-size:7px;color:rgba(0,255,65,0.4);letter-spacing:5px;margin-bottom:12px;opacity:0;animation:cineFadeIn 0.4s ease 0.1s forwards;";
            eraEl.innerText='[ ERA: '+seq.era+' ]';
            textEl.appendChild(eraEl);
        }
        let totalDelay=200;
        seq.lines.forEach((line,li)=>{
            const isKey=li===seq.lines.length-1&&!seq.isPause;
            const div=document.createElement('div');
            div.className='cine-line';
            div.style.animationDelay=totalDelay+'ms';
            div.style.fontFamily="'Bebas Neue',sans-serif";
            div.style.lineHeight='0.88';
            div.style.textTransform='uppercase';
            if(seq.isPause){div.style.fontSize='22vw';div.style.color='rgba(255,255,255,0.1)';div.style.letterSpacing='14px';div.style.textAlign='center';}
            else if(isKey){div.style.fontSize=seq.era==='ATTENTION'||seq.era==='TODAY'||seq.era==='HOMO DEUS'?'12vw':'15vw';div.style.color='var(--neon)';div.style.textShadow='0 0 40px var(--neon),0 0 80px rgba(0,255,65,0.3)';}
            else{div.style.fontSize='7vw';div.style.color='rgba(255,255,255,0.65)';}
            div.innerText=line;
            textEl.appendChild(div);
            totalDelay+=420;
            if(isKey){const slash=document.createElement('span');slash.className='cine-slash';slash.style.animationDelay=(totalDelay-180)+'ms';textEl.appendChild(slash);totalDelay+=200;}
        });
        if(seq.sub){
            const subEl=document.createElement('div');subEl.className='cine-line';
            subEl.style.cssText=`animation-delay:${totalDelay}ms;font-family:'Share Tech Mono',monospace;font-size:9px;color:rgba(255,255,255,0.4);letter-spacing:1.5px;line-height:1.9;margin-top:12px;white-space:pre-line;`;
            subEl.innerText=seq.sub;textEl.appendChild(subEl);totalDelay+=500;
        }
        const dur=seq.pause?totalDelay+2200:totalDelay+1000;
        setTimeout(()=>{if(currentPage!==10)return;showSequence(idx+1);},dur);
    }
    setTimeout(()=>showSequence(0),300);
}
// ── P12 OUTRO ──────────────────────────────────────────────────
let outroInited=false;
function buildOutro(){
    if(outroInited)return;outroInited=true;
    document.getElementById('header').style.transition='opacity 0.8s';document.getElementById('header').style.opacity='0';
    document.getElementById('progress-bar').style.opacity='0';
    document.getElementById('global-reminder').style.opacity='0';
    const canvas=document.getElementById('p12-stars');
    canvas.width=window.innerWidth;canvas.height=window.innerHeight;
    const ctx=canvas.getContext('2d');
    const stars=[];
    for(let i=0;i<220;i++)stars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*1.5+0.2,phase:Math.random()*Math.PI*2,speed:0.005+Math.random()*0.02});
    function drawStars(t){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        stars.forEach(s=>{
            const o=0.1+0.5*Math.abs(Math.sin(s.phase+t*s.speed));
            ctx.beginPath();ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
            ctx.fillStyle=`rgba(0,255,65,${o*0.45})`;ctx.fill();
        });
        if(currentPage===11)requestAnimationFrame(t2=>drawStars(t2/100));
    }
    requestAnimationFrame(t=>drawStars(t/100));
    const prefix=document.getElementById('p12-prefix');
    const logo=document.getElementById('p12-logo');
    const thanks=document.getElementById('p12-thanks');
    const line=document.getElementById('p12-line');
    const sub=document.getElementById('p12-sub');
    setTimeout(()=>prefix.style.opacity='1',400);
    setTimeout(()=>logo.style.opacity='1',1400);
    setTimeout(()=>thanks.style.opacity='1',2700);
    setTimeout(()=>line.style.width='70%',3300);
    setTimeout(()=>sub.style.opacity='1',4200);
}
// ── P10 CALLBACK ──────────────────────────────────────────────
function buildCallback(){
    const headline=document.getElementById('p10-headline');
    const receipt=document.getElementById('p10-receipt');
    const timeBlock=document.getElementById('p10-time-block');
    const footer=document.getElementById('p10-footer');
    if(headline.innerText)return;
    const totalSecs=Math.round((performance.now()-globalStart)/1000);
    const mins=Math.floor(totalSecs/60);const secs=totalSecs%60;
    const timeStr=mins>0?`${mins} MIN ${secs}S`:`${secs} SECONDS`;
    const likedCount=igLikes.length,skippedCount=igSkips.length;
    const didRush=touchVelocities.length&&touchVelocities.reduce((a,b)=>a+b,0)/touchVelocities.length<300;
    const labelMap={pizza:'🍕 pizza',coffee:'☕ coffee',cats:'🐱 cats',sunsets:'🌅 sunsets',food:'🍜 food',fitness:'💪 fitness',music:'🎧 music',travel:'✈️ travel'};
    // typewriter headline
    const rawH=likedCount===0?`YOU LIKED\nNOTHING.\nTHEY\nNOTED THAT.`:`I KNOW\nYOU LIKE\n${(labelMap[igLikes[0]]||igLikes[0]).toUpperCase().replace(/[^\w ]/g,'')}.`;
    headline.style.whiteSpace='pre-line';
    let hi=0;const hiv=setInterval(()=>{
        if(hi>=rawH.length){clearInterval(hiv);return;}
        const ch=rawH[hi++];
        if(ch==='\n')headline.innerHTML+='<br>';
        else headline.innerHTML+=ch;
    },45);
    // receipt — thermal print
    const allItems=[];
    igLikes.forEach(tag=>allItems.push({label:labelMap[tag]||tag,note:'♥  liked',neon:true}));
    igSkips.forEach(tag=>allItems.push({label:labelMap[tag]||tag,note:'skipped',neon:false}));
    allItems.forEach((item,i)=>{
        const row=document.createElement('div');row.className='receipt-row';
        row.style.animationDelay=(rawH.length*45+180+i*110)+'ms';
        row.innerHTML=`<div style="font-family:'Inter',sans-serif;font-size:14px;color:#fff;">${item.label}</div><div style="font-family:'Share Tech Mono',monospace;font-size:9px;color:${item.neon?'var(--neon)':'rgba(255,255,255,0.35)'};letter-spacing:2px;">${item.note}</div>`;
        receipt.appendChild(row);
    });
    const attention=didRush?"you rushed through most of it. fast fingers, shallow attention.":hesitations>3?"you hesitated. you were actually thinking. that is rare.":totalSecs<60?"you blew through this in under a minute. exactly as designed.":"you took your time. that's something they didn't expect.";
    const delay=rawH.length*45+allItems.length*110+500;
    setTimeout(()=>{
        timeBlock.style.animation='unlockPop 0.4s ease both';
        timeBlock.innerHTML=`<div style="font-family:'Share Tech Mono',monospace;font-size:7px;letter-spacing:3px;color:var(--neon);margin-bottom:8px;opacity:0.6;">TIME TO REACH THIS PAGE</div><div style="font-family:'Bebas Neue',sans-serif;font-size:14vw;color:var(--amber);line-height:0.88;text-shadow:0 0 30px var(--amber),0 0 70px rgba(255,183,0,0.25);">${timeStr}</div><div style="font-family:'Share Tech Mono',monospace;font-size:11px;color:#fff;margin-top:12px;letter-spacing:1px;line-height:1.7;">${attention}</div>`;
    },delay);
    setTimeout(()=>{
        const liked=igLikes.length>0?`you engaged with: ${igLikes.map(t=>labelMap[t]||t).join(', ')}.`:`you engaged with nothing. they logged that too.`;
        footer.innerHTML=`<div style="color:#fff;font-size:11px;line-height:2;">${liked}</div>${igSkips.length>0?`<div style="color:rgba(255,255,255,0.45);font-size:10px;margin-top:2px;">you skipped: ${igSkips.map(t=>labelMap[t]||t).join(', ')}.</div>`:''}<div style="color:#fff;font-size:11px;margin-top:16px;line-height:2;border-top:1px solid #0a1a0a;padding-top:14px;">a real platform would have sold this data to <span style="color:var(--neon);">47 advertisers</span> before you left the feed.<br><br>the session took <span style="color:var(--amber);">${timeStr}</span>.<br>that is time you cannot get back.</div><div style="margin-top:16px;font-size:8px;color:rgba(255,255,255,0.35);border-top:1px solid #0a0a0a;padding-top:12px;letter-spacing:1px;">— BASED ON HARARI'S 21 LESSONS FOR THE 21ST CENTURY</div>`;
        addContinueHint(200);
    },delay+400);
}
// ── AUDIO ENGINE ───────────────────────────────────────────────
let audioCtx=null;
function getAudio(){if(!audioCtx){try{audioCtx=new(window.AudioContext||window.webkitAudioContext)();}catch(e){}}return audioCtx;}
function playTone(freq,type,duration,vol,delay=0,filterFreq=null){
    const ctx=getAudio();if(!ctx)return;
    setTimeout(()=>{
        try{
            const osc=ctx.createOscillator();const gain=ctx.createGain();
            if(filterFreq){const f=ctx.createBiquadFilter();f.type='lowpass';f.frequency.value=filterFreq;osc.connect(f);f.connect(gain);}
            else{osc.connect(gain);}
            gain.connect(ctx.destination);
            osc.type=type;osc.frequency.setValueAtTime(freq,ctx.currentTime);
            gain.gain.setValueAtTime(0,ctx.currentTime);gain.gain.linearRampToValueAtTime(vol,ctx.currentTime+0.01);
            gain.gain.exponentialRampToValueAtTime(0.0001,ctx.currentTime+duration);
            osc.start(ctx.currentTime);osc.stop(ctx.currentTime+duration);
        }catch(e){}
    },delay);
}
function playNoise(duration,vol,filterFreq=800){
    const ctx=getAudio();if(!ctx)return;
    try{
        const buf=ctx.createBuffer(1,Math.floor(ctx.sampleRate*duration),ctx.sampleRate);
        const data=buf.getChannelData(0);for(let i=0;i<data.length;i++)data[i]=Math.random()*2-1;
        const src=ctx.createBufferSource();src.buffer=buf;
        const f=ctx.createBiquadFilter();f.type='bandpass';f.frequency.value=filterFreq;f.Q.value=0.5;
        const gain=ctx.createGain();gain.gain.setValueAtTime(vol,ctx.currentTime);gain.gain.exponentialRampToValueAtTime(0.0001,ctx.currentTime+duration);
        src.connect(f);f.connect(gain);gain.connect(ctx.destination);src.start();
    }catch(e){}
}
function soundForPage(pg){
    const ctx=getAudio();if(!ctx)return;
    if(pg===0){playTone(220,'sine',0.5,0.06);playTone(440,'sine',0.3,0.03,120);}
    else if(pg===1){playNoise(0.06,0.07,1400);playTone(80,'sawtooth',0.4,0.04,80,400);}
    else if(pg===2){playTone(300,'triangle',0.18,0.05);playTone(600,'sine',0.12,0.03,80);}
    else if(pg===3){playTone(50,'sawtooth',0.6,0.07,0,280);playNoise(0.1,0.05,500);}
    else if(pg===4){playTone(38,'sawtooth',0.7,0.08,0,200);playNoise(0.18,0.08,350);}
    else if(pg===5){playTone(880,'sine',0.09,0.04);playTone(1760,'sine',0.07,0.02,50);}
    else if(pg===6){playTone(200,'sine',0.35,0.05);playTone(400,'triangle',0.22,0.04,100);}
    else if(pg===7){playTone(110,'sine',0.45,0.06);playTone(220,'sine',0.3,0.04,140);}
    else if(pg===8){playTone(150,'triangle',0.4,0.06);playTone(300,'sine',0.25,0.03,180);}
    else if(pg===9){playTone(528,'sine',0.4,0.07);playTone(1056,'sine',0.22,0.04,120);playTone(1584,'sine',0.12,0.02,240);}
    else if(pg===10){playTone(174,'sine',0.7,0.05);playTone(261,'sine',0.6,0.04,220);playTone(348,'sine',0.5,0.03,440);}
    else if(pg===11){playTone(55,'sine',1.5,0.04);playTone(110,'sine',1.2,0.03,350);playTone(82,'sine',1.0,0.02,800);}
}
function soundLike(){playTone(880,'sine',0.12,0.07);playTone(1320,'sine',0.1,0.05,70);playTone(1760,'sine',0.08,0.03,140);}
function soundSwipe(){playNoise(0.035,0.035,2200);}
// ── HEADER MORPH ───────────────────────────────────────────────
const HEADER_LABELS=['KERNEL_ACTIVE','BREACH_MODE','ATTENTION_TRAP','SIGNAL_FLOOD','OUTRAGE_ENGINE','SCROLL_SIM','BEHAVIOR_SCAN','CONTROL_MAP','PROTOCOL_INIT','DATA_RECEIPT','POWER_SHIFT','SIGNAL_END'];
function morphHeader(pg){
    const el=document.getElementById('h-right');
    el.style.transition='opacity 0.12s';el.style.opacity='0';
    setTimeout(()=>{el.innerText=`PHASE_${String(pg+1).padStart(2,'0')} / ${TOTAL_PAGES}`;el.style.opacity='1';},130);
    const left=document.getElementById('h-left');
    if(HEADER_LABELS[pg]){left.style.transition='opacity 0.12s';left.style.opacity='0';
    setTimeout(()=>{left.innerText=`[ ${HEADER_LABELS[pg]} ]`;left.style.opacity='1';},130);}
}
// ── P10 CONTINUE HINT ──────────────────────────────────────────
function addContinueHint(delay){
    setTimeout(()=>{
        if(document.getElementById('p10-hint'))return;
        const hint=document.createElement('div');hint.id='p10-hint';
        hint.style.cssText='margin-top:28px;text-align:center;font-family:\'Share Tech Mono\',monospace;font-size:9px;color:var(--neon);letter-spacing:5px;animation:pulse 1.1s infinite alternate;padding-bottom:8px;';
        hint.innerText='SWIPE → TO CONTINUE';
        const footer=document.getElementById('p10-footer');
        if(footer)footer.appendChild(hint);
    },delay);
}
// ── WIRE AUDIO INTO IG LIKES ───────────────────────────────────
const _origIgHeart=igHeart;
window.igHeart=function(idx,btnEl){soundLike();_origIgHeart(idx,btnEl);};
// ── WIRE MORPH + SOUNDS INTO onPageEnter ──────────────────────
const _origOnPageEnter=onPageEnter;
window.onPageEnter=function(pg){
    soundForPage(pg);
    morphHeader(pg);
    _origOnPageEnter(pg);
    if(pg===11){setTimeout(startLogoBreath,2800);setTimeout(startMatrixRain,600);}
};
// ── P12 LOGO BREATH ────────────────────────────────────────────
function startLogoBreath(){const logo=document.getElementById('p12-logo');if(logo)logo.style.animation='logoBreath 4s ease-in-out infinite';}
// ── EXTRA KEYFRAME ─────────────────────────────────────────────
const extraStyle=document.createElement('style');
extraStyle.textContent=`
@keyframes logoBreath{0%,100%{transform:scale(1);filter:drop-shadow(0 0 20px rgba(0,255,65,0.3))}50%{transform:scale(1.015);filter:drop-shadow(0 0 70px rgba(0,255,65,0.9)) drop-shadow(0 0 140px rgba(0,255,65,0.3))}}
@keyframes pageSlideInRight{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}
@keyframes pageSlideInLeft{from{transform:translateX(-100%);opacity:0}to{transform:translateX(0);opacity:1}}
@keyframes pageSlideOutLeft{from{transform:translateX(0);opacity:1}to{transform:translateX(-6%);opacity:0}}
@keyframes pageSlideOutRight{from{transform:translateX(0);opacity:1}to{transform:translateX(6%);opacity:0}}
@keyframes overloadFlash{0%{opacity:0}10%{opacity:1}20%{opacity:0.3}30%{opacity:0.9}50%{opacity:0.1}70%{opacity:1}100%{opacity:0}}
@keyframes matrixChar{0%{opacity:0;transform:translateY(-20px)}10%{opacity:1}90%{opacity:0.6}100%{opacity:0;transform:translateY(100vh)}}
`;
document.head.appendChild(extraStyle);

// ── PAGE TRANSITIONS ──────────────────────────────────────────
function transitionPages(fromIdx,toIdx,dir){
    const fromPage=pages[fromIdx];
    const toPage=pages[toIdx];
    // out
    fromPage.style.animation=`${dir>0?'pageSlideOutLeft':'pageSlideOutRight'} 0.28s cubic-bezier(0.4,0,0.2,1) forwards`;
    fromPage.style.zIndex='5';
    // in
    toPage.classList.add('active');
    toPage.style.animation=`${dir>0?'pageSlideInRight':'pageSlideInLeft'} 0.3s cubic-bezier(0.2,0,0,1) forwards`;
    toPage.style.zIndex='6';
    setTimeout(()=>{
        fromPage.classList.remove('active');
        fromPage.style.animation='';
        fromPage.style.zIndex='5';
        toPage.style.animation='';
        toPage.style.zIndex='5';
    },310);
}

// ── MATRIX RAIN (P12) ─────────────────────────────────────────
function startMatrixRain(){
    const existing=document.getElementById('matrix-rain');if(existing)return;
    const canvas=document.createElement('canvas');
    canvas.id='matrix-rain';
    canvas.style.cssText='position:absolute;inset:0;z-index:0;opacity:0;transition:opacity 3s;pointer-events:none;';
    const p12=document.getElementById('p12');
    p12.insertBefore(canvas,p12.firstChild);
    canvas.width=window.innerWidth;canvas.height=window.innerHeight;
    const ctx=canvas.getContext('2d');
    const cols=Math.floor(canvas.width/16);
    const drops=Array(cols).fill(0).map(()=>Math.random()*canvas.height/16*-1);
    const chars='アイウエオカキクケコサシスセソタチツテトナニヌネノ01ハヒフヘホマミムメモ10ラリルレロワヲン'.split('');
    function rain(){
        if(currentPage!==11)return;
        ctx.fillStyle='rgba(0,0,0,0.05)';
        ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.font='14px Share Tech Mono,monospace';
        drops.forEach((y,i)=>{
            const char=chars[Math.floor(Math.random()*chars.length)];
            const x=i*16;
            const alpha=Math.random()>0.95?1:0.35+Math.random()*0.3;
            ctx.fillStyle=`rgba(0,255,65,${alpha})`;
            ctx.fillText(char,x,y*16);
            if(y*16>canvas.height&&Math.random()>0.975)drops[i]=0;
            else drops[i]+=0.5+Math.random()*0.3;
        });
        requestAnimationFrame(rain);
    }
    setTimeout(()=>{canvas.style.opacity='0.18';rain();},1000);
}

// ── P5 OVERLOAD CLIMAX ────────────────────────────────────────
let overloadFired=false;
function maybeFireOverload(){
    if(overloadFired||currentPage!==4)return;
    overloadFired=true;
    const flash=document.getElementById('rage-flash');
    const border=document.getElementById('rage-border');
    // sequence: flash white 3x, then red explosion, then "SYSTEM OVERLOAD" text
    const seq=[
        ()=>{flash.style.background='#fff';flash.style.opacity='0.4';},
        ()=>{flash.style.opacity='0';},
        ()=>{flash.style.background='#fff';flash.style.opacity='0.6';},
        ()=>{flash.style.opacity='0';},
        ()=>{flash.style.background='#ff003c';flash.style.opacity='0.7';border.style.borderColor='#fff';border.style.borderWidth='4px';},
        ()=>{flash.style.opacity='0.1';},
    ];
    seq.forEach((fn,i)=>setTimeout(fn,i*80));
    setTimeout(()=>{
        border.style.borderColor='var(--red)';border.style.borderWidth='2px';
        const overload=document.createElement('div');
        overload.style.cssText='position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:9999;font-family:"Bebas Neue",sans-serif;font-size:18vw;color:#fff;text-shadow:0 0 60px #ff003c,0 0 120px #ff003c;letter-spacing:-2px;text-align:center;line-height:0.82;pointer-events:none;animation:overloadFlash 1.2s ease forwards;';
        overload.innerHTML='SYS<br>OVERLOAD';
        document.body.appendChild(overload);
        setTimeout(()=>overload.remove(),1300);
        // fire a barrage of alerts
        for(let i=0;i<6;i++)setTimeout(fireAlert,i*120);
    },seq.length*80+100);
}

// ── P1 CURSOR PARALLAX ────────────────────────────────────────
(function initParallax(){
    const glitch=document.getElementById('p1-glitch');
    let mx=window.innerWidth/2,my=window.innerHeight/2;
    document.addEventListener('mousemove',e=>{
        if(currentPage!==0)return;
        mx+=(e.clientX-mx)*0.08;my+=(e.clientY-my)*0.08;
        const dx=(mx/window.innerWidth-0.5)*14;
        const dy=(my/window.innerHeight-0.5)*8;
        glitch.style.transform=`translate(${dx}px,${dy}px)`;
    });
    document.addEventListener('touchmove',e=>{
        if(currentPage!==0)return;
        const t=e.touches[0];
        mx=t.clientX;my=t.clientY;
        const dx=(mx/window.innerWidth-0.5)*20;
        const dy=(my/window.innerHeight-0.5)*12;
        glitch.style.transform=`translate(${dx}px,${dy}px)`;
    },{passive:true});
})();

// ── P5 OVERLOAD TIMER ─────────────────────────────────────────
setInterval(()=>{
    if(currentPage===4&&!overloadFired){
        const t=(performance.now()-rageStart)/1000;
        if(t>14)maybeFireOverload();
    }
},500);

// ── PATCH NAVIGATE WITH TRANSITIONS ──────────────────────────
const __navigate=navigate;
window.navigate=function(dir){
    soundSwipe();
    let next=currentPage+dir;
    if(next<0||next>=TOTAL_PAGES)return;
    if(currentPage===5&&!igFeedDone)return;
    if(next===5&&igIndex>0&&igIndex<IG_POSTS.length)return;
    // pre-navigate logic from original
    if(currentPage===1){
        const dur=(performance.now()-page2StartTime)/1000;
        const td=document.getElementById('time-display');
        td.innerText=dur.toFixed(2)+'s';
        td.style.animation='stampIn 0.35s cubic-bezier(0.1,0.9,0.2,1) forwards';
        document.getElementById('time-compare').innerHTML=dur<3?`FASTER THAN YOU BLINK.<br>YOU BARELY PROCESSED WHAT YOU SAW.`:dur<8?`AVERAGE. THE ALGO ALREADY<br>KNEW YOU'D MOVE ON.`:`SLOW. YOU ACTUALLY THOUGHT.<br><span style="color:var(--neon);">THAT'S RARE.</span>`;
        document.body.style.animation='shake 0.4s ease';
        setTimeout(()=>document.body.style.animation='',400);
    }
    const rf=document.getElementById('rage-flash');rf.style.background='#fff';rf.style.opacity='0.04';setTimeout(()=>rf.style.opacity='0',80);
    const fromIdx=currentPage;
    currentPage=next;
    transitionPages(fromIdx,currentPage,dir);
    updateDots();
    onPageEnter(currentPage);
};

updateDots();
</script>
</body>
</html>